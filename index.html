document.addEventListener('DOMContentLoaded', function() {
    const videos = document.querySelectorAll('.video-to-maximize');

    videos.forEach((video, index) => {
        video.addEventListener('play', function() {
            // Pausa todos os outros vídeos e os redefine
            videos.forEach(v => {
                if (v !== video) {
                    v.pause();
                    v.currentTime = 0;
                }
            });

            // Solicita tela cheia para o vídeo atual, se não estiver já em tela cheia
            if (!document.fullscreenElement) {
                requestFullScreen(video);
            }

            video.muted = true;
        });

        video.addEventListener('ended', function() {
            // Passa para o próximo vídeo ou volta ao primeiro
            const nextIndex = (index + 1) % videos.length;
            const nextVideo = videos[nextIndex];

            // Inicia o próximo vídeo e tenta solicitar tela cheia com atraso
            nextVideo.currentTime = 0;
            nextVideo.play();

            setTimeout(() => {
                if (!document.fullscreenElement) {
                    requestFullScreen(nextVideo); // Solicita tela cheia para o próximo vídeo
                }
            }, 300); // Atraso de 300 ms para tentar evitar erros de permissão
        });
    });

    // Função para solicitar tela cheia
    function requestFullScreen(video) {
        if (video.requestFullscreen) {
            video.requestFullscreen().catch((err) => console.error("Erro ao solicitar tela cheia:", err));
        } else if (video.mozRequestFullScreen) {
            video.mozRequestFullScreen().catch((err) => console.error("Erro ao solicitar tela cheia:", err));
        } else if (video.webkitRequestFullscreen) {
            video.webkitRequestFullscreen().catch((err) => console.error("Erro ao solicitar tela cheia:", err));
        } else if (video.msRequestFullscreen) {
            video.msRequestFullscreen().catch((err) => console.error("Erro ao solicitar tela cheia:", err));
        }
    }
});
